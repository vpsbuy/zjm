下面列出一些使用炸酱面探针 agent 时需要特别注意的事项，尤其是针对网卡（网络接口）的配置和使用：

---

### 1. 确认网卡名称

- **核实系统内实际网卡名称**  
  在启动 agent 之前，通过命令如 `ip addr` 或 `ifconfig` 检查宿主机的网卡名称。默认配置中 agent 参数指定的是 `--interface eth0`，但在部分系统中网卡名称可能不是 `eth0`（例如 `ens33`、`eno1` 等），请根据实际情况进行调整。

---

### 2. 使用 Host 网络模式

- **host 模式说明**  
  在 Docker 运行中使用 `--network host` 参数后，容器会共享宿主机的网络堆栈。这种模式下 agent 能直接访问宿主机的所有网卡，但仍需要确保通过 `--interface` 参数指定一个正确的网卡以获取期望的数据。

- **确保网络稳定性**  
  由于容器直接使用宿主机网络，确保宿主机网络配置正确，防火墙和安全策略允许 agent 所需的网络通信（例如访问 `ws-url` 和 `dashboard-url`）。

---

### 3. 多网卡环境下的注意事项

- **选择目标网卡**  
  如果宿主机配置有多个网络接口，agent 只会监控通过 `--interface` 指定的那一个。  
  - 请明确你希望监控哪个网卡，并在参数中准确设置，否则可能会监控到错误的接口流量或遗漏关键数据。

- **动态网卡名称**  
  部分操作系统在重启或更新后可能会更改网卡命名规则。建议在部署前确认当前网卡名称，并在配置文件或启动脚本中注明备注，以便日后更新时对比检查。

---

### 4. 网络权限与安全设置

- **防火墙与安全组配置**  
  使用 host 网络模式时，请核实防火墙设置是否允许 Docker 容器访问外部网络及指定服务（如 Websocket 地址和 Dashboard 地址）。  
  - 确保 agent 可以正常与服务器通信，特别是涉及敏感参数时（例如 token、ws-url）。

- **敏感参数保护**  
  配置中的 token 等敏感信息应通过安全管道传输，防止在网络通信中泄露。建议仅在安全、可信的网络环境下进行部署。

---

### 5. 网络负载与性能监控

- **系统性能考虑**  
  如果监控的是高流量环境或多网卡数据，请注意长期运行可能引起宿主机负载升高。  
  - 定期监控系统性能，确保 agent 监控不会对主机其他任务产生过大影响。

- **日志调试**  
  在遇到问题时，可通过 `docker logs -f zjmagent`（或者在 Docker Compose 环境中使用 `docker-compose logs -f zjmagent`）检查日志，确认是否因网卡配置错误或其他网络问题导致数据采集异常。

---

### 6. 网络变动的响应

- **监控环境变更**  
  如果宿主机网络配置发生变化（例如网卡名称变动、网络环境重构），及时更新 agent 启动参数中 `--interface` 的值，并核实 `ws-url` 与 `dashboard-url` 是否依然适用。

- **及时调整配置**  
  建议在环境变更时记录并更新相关文档，这样后续可以迅速定位问题和调整 agent 配置。

---

总之，正确选择和配置网卡是确保炸酱面探针 agent 正常监控和上报数据的重要环节。在部署前仔细核查宿主机网络接口、合理使用 host 模式、并保持环境配置的一致性与安全性，将帮助你实现稳定的监控效果。
